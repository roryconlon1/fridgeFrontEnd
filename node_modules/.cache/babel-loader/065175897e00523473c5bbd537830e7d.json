{"ast":null,"code":"import _slicedToArray from \"/Users/greigkerr/Documents/codeclan_work/FridgeProject/ReactFrontEnd/fridgeFrontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/greigkerr/Documents/codeclan_work/FridgeProject/ReactFrontEnd/fridgeFrontEnd/src/components/recipes/RecipeDetail.js\";\n\nimport React, { useState } from \"react\";\nimport Recipe from \"./Recipe\";\nimport Request from \"../../helpers/request\";\nimport Food from \"../foods/Food\";\nimport { useNavigate } from \"react-router-dom\";\n\nvar RecipeDetail = function RecipeDetail(_ref) {\n  var recipe = _ref.recipe,\n      foods = _ref.foods,\n      getRecipe = _ref.getRecipe;\n  var navigate = useNavigate();\n\n  if (!recipe) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 16\n      }\n    }, \"Loading . . .\");\n  }\n\n  var ingredientQuantity = {};\n  recipe.foods.forEach(function (food, index) {\n    if (food.name in ingredientQuantity) {\n      ingredientQuantity[food.name] += 1;\n    } else {\n      ingredientQuantity[food.name] = 1;\n    }\n  });\n  var ingredientElements = Object.entries(ingredientQuantity).map(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        key = _ref3[0],\n        value = _ref3[1];\n\n    return /*#__PURE__*/React.createElement(\"li\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 21\n      }\n    }, key, \" x \", value);\n  });\n\n  var handleDelete = function handleDelete(id) {\n    var request = new Request();\n    var url = \"/api/recipes/\" + id;\n    request.delete(url).then(function () {\n      getRecipe();\n      navigate(\"/recipes\");\n    });\n  };\n\n  var handleNewIngredient = function handleNewIngredient(foodId) {\n    var request = new Request();\n    request.put(\"/api/recipes/\".concat(recipe.id, \"/addIngredient/\").concat(foodId)).then(function () {\n      getRecipe();\n      navigate(\"/recipes/\".concat(recipe.id));\n    });\n  };\n\n  var onDelete = function onDelete() {\n    handleDelete(recipe.id);\n  };\n\n  var onPost = function onPost(event) {\n    event.preventDefault();\n    console.log(event.target);\n    handleNewIngredient(event.target.food.value);\n  };\n\n  var allIngredients = foods.map(function (food, index) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: food.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 16\n      }\n    }, food.name);\n  });\n  var allCalories = recipe.foods.reduce(function (runningTotal, food) {\n    return runningTotal += food.calories;\n  }, 0);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"individual\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, recipe.name), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \"Total Calories: \"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, allCalories), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, recipe.method), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, recipe.recipeType), /*#__PURE__*/React.createElement(\"img\", {\n    src: recipe.image,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"Ingredients :\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, ingredientElements)), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"Delete Recipe\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onPost,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    name: \"food\",\n    defaultValue: \"select-food\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    disabled: true,\n    value: \"select-food\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \"Select a new Ingredient\"), allIngredients), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Add Ingredient\")));\n};\n\nexport default RecipeDetail;","map":{"version":3,"names":["React","useState","Recipe","Request","Food","useNavigate","RecipeDetail","recipe","foods","getRecipe","navigate","ingredientQuantity","forEach","food","index","name","ingredientElements","Object","entries","map","key","value","handleDelete","id","request","url","delete","then","handleNewIngredient","foodId","put","onDelete","onPost","event","preventDefault","console","log","target","allIngredients","allCalories","reduce","runningTotal","calories","method","recipeType","image"],"sources":["/Users/greigkerr/Documents/codeclan_work/FridgeProject/ReactFrontEnd/fridgeFrontEnd/src/components/recipes/RecipeDetail.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Recipe from \"./Recipe\";\nimport Request from \"../../helpers/request\";\nimport Food from \"../foods/Food\";\nimport { useNavigate } from \"react-router-dom\";\n\n\nconst RecipeDetail = ({recipe, foods, getRecipe}) => {\n\n    const navigate = useNavigate()\n\n    if(!recipe){\n        return <p>Loading . . .</p>\n    }\n\n\n    const ingredientQuantity = {}\n    recipe.foods.forEach((food, index) => {\n            if(food.name in ingredientQuantity){\n                ingredientQuantity[food.name] += 1\n            }\n            else {\n                ingredientQuantity[food.name] = 1\n            }\n        });\n        const ingredientElements = Object.entries(ingredientQuantity).map(([key, value])=>{\n            return  <li>{key} x {value}</li>\n        })\n\n    const handleDelete = (id) => {\n        const request = new Request();\n        const url = \"/api/recipes/\" + id;\n        request.delete(url)\n        .then(() => {\n            getRecipe()\n            navigate(\"/recipes\")\n        })\n    }\n\n    const handleNewIngredient = (foodId) => {\n        const request = new Request();\n        request.put(`/api/recipes/${recipe.id}/addIngredient/${foodId}`)\n        .then (() => {\n            getRecipe()\n            navigate(`/recipes/${recipe.id}`)\n            \n        })\n    }\n\n    const onDelete = () => {\n        handleDelete(recipe.id)\n    }\n\n    const onPost = (event) => {\n        event.preventDefault();\n        console.log(event.target);\n        handleNewIngredient(event.target.food.value)\n    }\n\n    const allIngredients = foods.map((food, index) => {\n        return <option key={index} value={food.id}>{food.name}</option>\n    })\n\n    const allCalories = recipe.foods.reduce((runningTotal, food) => {\n        return(\n            runningTotal += food.calories\n        )\n    }, 0)\n    \n    \n\n\n    return(\n        <div className=\"individual\">\n            <h1>{recipe.name}</h1>\n            {/* <h2>{recipe.cookTime}</h2> */}\n            <h2>Total Calories: </h2>\n            <h2>{allCalories}</h2>\n            <h3>{recipe.method}</h3>\n            <h3>{recipe.recipeType}</h3>\n            <img src={recipe.image}></img>\n            <h2>Ingredients :</h2>\n            <h3><i>{ingredientElements}</i></h3>\n            <button onClick={(onDelete)}>Delete Recipe</button>\n            <form onSubmit={onPost}>\n                <select name=\"food\"  defaultValue=\"select-food\">\n                    <option disabled value=\"select-food\">\n                        Select a new Ingredient\n                    </option>\n                    {allIngredients}\n                </select>\n                <button type=\"submit\">Add Ingredient</button>\n            </form>\n            \n        </div>\n    )\n}\n\nexport default RecipeDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}